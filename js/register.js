$(function(){$("#email_reg").bind("focus",function(){$("#email_tip").text("用来登录口立方， 接收到激活邮件才能完成注册").css("color","#666699").show()}).bind("blur",function(){if(this.value==""){$("#email_tip").text("Email不能为空").css("color","red")}else{if(!/.+?@.+?\.[a-zA-Z]{2,4}$/.test(this.value)){$("#email_tip").text("Email格式不正确").css("color","red")}else{var b=$(this).val(),a="/accounts/register/check_email.php?email="+b;$.get(a,function(c){if(c=="1"){$("#email_tip").text("该邮箱已被注册").css("color","red").show()}else{if($data=="0"){$("#email_tip").text("该邮箱可以使用").css("color","#666699").show()}else{$("#email_tip").text($data).css("color","red").show()}}return false})}}});$("#pwd_reg").bind("focus",function(){$("#pwd_tip").text("字母、数字或符号，最短四个字符，区分大小写").css("color","#666699").show()}).bind("blur",function(){$("#pwd_tip").text("");if(this.value==""){$("#pwd_tip").text("密码不能为空").css("color","red")}if(this.value!=""&&this.value.length<4){$("#pwd_tip").text("密码长度不足四个字符").css("color","red")}});$("#pwd_confirm").bind("focus",function(){$("#pwd_confirm_tip").text("请您再次输入密码").css("color","#666699").show()}).bind("blur",function(){$("#pwd_confirm_tip").text("");if(this.value!=$("#pwd_reg").val()){$("#pwd_confirm_tip").text("两次输入密码不一致，请重新输入").css("color","red");this.value=""}});$("#name_reg").bind("focus",function(){$("#name_tip").text("中、英文均可，最长14个英文或7个汉字").css("color","#666699").show()}).bind("blur",function(){$("#name_tip").text("");var b=this.value;if(b==""){$("#name_tip").text("名号不能为空").css("color","red")}else{if(b.indexOf(" ")!=-1){$("#name_tip").text("名号不能包含空格").css("color","red")}else{var c=b.match(/[^\x00-\xff]/ig),a=b.length+(c==null?0:c.length);if(a>14){$("#name_tip").text("名号长度不能超过14个英文或7个汉字").css("color","red")}}}});$("#agree_term").click(function(a){if($("#agree_term").attr("checked")){$("#term_tip").text("").css("color","#666699")}else{$("#term_tip").text("请勾选同意注册协议").css("color","red").show()}});$("#btn_submit_signup a").click(function(f){var b=$("#email_reg").val(),d=$("#pwd_reg").val(),g=$("#pwd_confirm").val(),c=$("#name_reg").val();if(d!=g){$("#pwd_confirm_tip").text("两次输入密码不一致，请重新输入").css("color","red");$("#pwd_confirm").val("")}if(!$("#agree_term").attr("checked")){$("#term_tip").text("请勾选同意注册协议").css("color","red").show()}var a=($("#email_tip").css("color")=="red")||($("#pwd_tip").css("color")=="red")||($("#pwd_confirm_tip").css("color")=="red")||($("#name_tip").css("color")=="red")||($("#term_tip").css("color")=="red");if(a||b==""||d==""||g==""||c==""){f.preventDefault();$(".err_notify").remove();$("#register_title").after('<div class="err_notify">表单有误或未填写完整</div>')}else{$("#register_form").submit()}});$("#email_reg, #pwd_reg, #pwd_confirm, #name_reg, #agree_term").bind("keyup",function(g){var f=g.keyCode||g.which;if(f==13){var b=$("#email_reg").val(),d=$("#pwd_reg").val(),h=$("#pwd_confirm").val(),c=$("#name_reg").val();if(d!=h){$("#pwd_confirm_tip").text("两次输入密码不一致，请重新输入").css("color","red");$("#pwd_confirm").val("")}if(!$("#agree_term").attr("checked")){$("#term_tip").text("请勾选同意注册协议").css("color","red").show()}var a=($("#email_tip").css("color")=="red")||($("#pwd_tip").css("color")=="red")||($("#pwd_confirm_tip").css("color")=="red")||($("#name_tip").css("color")=="red")||($("#term_tip").css("color")=="red");if(a||b==""||d==""||h==""||c==""){g.preventDefault();$(".err_notify").remove();$("#register_title").append('<div class="err_notify">表单有误或未填写完整，请参考红色提示</div>')}else{$("#register_form").submit()}}});$("#a_resend").click(function(f){f.preventDefault();var b=$(this);if(b.data("executing")){return}b.data("executing",true);$(".a_notify").remove();var c=$("#imply_info").val(),d=decodeURIComponent(c),g=d.split("&"),a={uname:g[0],email:g[1]};$.post("/accounts/register/send_mail.php",a,function(e,h){if(e==1){$("#a_flag").after('<div class="a_notify">邮件已重新发送，请查收！</div>');b.removeData("executing")}})})});