$(function(){$("#sina_weibo").click(function(b){b.preventDefault();var a;if($(this).text()=="添加"){a={operation:"add"};$.post("/accounts/weibosource.php",a,function(c,d){self.location=c})}else{a={operation:"delete"};$.post("/accounts/weibosource.php",a,function(c,d){if(d=="success"){$("#sina_weibo").text("添加");$("#sina_weibo").prev().text("未添加帐号");$(".modify_notify").remove();$("#source_ul").before(c)}})}});$("#tencent_weibo").click(function(b){b.preventDefault();var a;if($(this).text()=="添加"){a={operation:"add"};$.post("/accounts/tweibosource.php",a,function(c,d){self.location=c})}else{a={operation:"delete"};$.post("/accounts/tweibosource.php",a,function(c,d){if(d=="success"){$("#tencent_weibo").text("添加");$("#tencent_weibo").prev().text("未添加帐号");$(".modify_notify").remove();$("#source_ul").before(c)}})}});$("#douban_forum").click(function(b){b.preventDefault();var a;if($(this).text()=="添加"){a={operation:"add"};$.post("/accounts/doubansource.php",a,function(c,d){self.location=c})}else{a={operation:"delete"};$.post("/accounts/doubansource.php",a,function(c,d){if(d=="success"){$("#douban_forum").text("添加");$("#douban_forum").prev().text("未添加帐号");$(".modify_notify").remove();$("#source_ul").before(c)}})}});$("#yupoo_pic").click(function(b){b.preventDefault();var a;if($(this).text()=="添加"){a={operation:"add"};$.post("/accounts/yupoosource.php",a,function(c,d){self.location=c})}else{a={operation:"delete"};$.post("/accounts/yupoosource.php",a,function(c,d){if(d=="success"){$("#yupoo_pic").text("添加");$("#yupoo_pic").prev().text("未添加帐号");$(".modify_notify").remove();$("#source_ul").before(c)}})}});$("#user_name").bind("focus",function(){$("#name_tip").text("最长14个英文或7个汉字").css("color","#666699").show()}).bind("blur",function(){$("#name_tip").text("");if(this.value==""){$("#name_tip").text("名号不能为空").css("color","red")}else{var b=this.value.match(/[^\x00-\xff]/ig),a=this.value.length+(b==null?0:b.length);if(a>14){$("#name_tip").text("名号长度不能超过14个英文或7个汉字").css("color","red")}}});$("#update_btn a").click(function(d){d.preventDefault();$(".update_notify").remove();var c=$("#user_name").val(),b=$("#user_intro").val();if(($("#name_tip").css("color")=="red")||c==""){return false}else{var a={username:c,userintro:b};$.post("/accounts/modifysetting",a,function(e,f){if("success"==f){$("#lzform").before(e)}})}});$("#login_email").bind("blur",function(){$("#login_email_tip").text("");if(this.value==""){$("#login_email_tip").text("Email不能为空").css("color","red").show()}else{if(!/.+@.+\.[a-zA-Z]{2,4}$/.test(this.value)){$("#login_email_tip").text("Email格式不正确").css("color","red").show()}}});$("#new_login_email").bind("blur",function(){$("#new_login_email_tip").text("");if(this.value==""){$("#new_login_email_tip").text("Email不能为空").css("color","red").show()}else{if(!/.+@.+\.[a-zA-Z]{2,4}$/.test(this.value)){$("#new_login_email_tip").text("Email格式不正确").css("color","red").show()}else{var b=$(this).val(),a="/accounts/register/check_email.php?email="+b;$.get(a,function(c){if(c=="1"){$("#new_login_email_tip").text("该邮箱已被注册").css("color","red").show()}else{$("#new_login_email_tip").text("该邮箱可以使用").css("color","#666699").show()}return false})}}});$("#new_email_cfm").bind("focus",function(){$("#new_email_cfm_tip").text("请您再次输入邮箱").css("color","#666699").show()}).bind("blur",function(){$("#new_email_cfm_tip").text("");if(this.value!=$("#new_login_email").val()){$("#new_email_cfm_tip").text("两次输入邮箱不一致，请重新输入").css("color","red");this.value=""}});$("#btn_email_modify").click(function(g){var b=$("#login_email").val(),c=$("#login_pwd").val(),d=$("#new_login_email").val(),f=$("#new_email_cfm").val(),a=($("#login_email_tip").text()!="")||($("#new_login_email_tip").css("color")=="red")||($("#new_email_cfm_tip").css("color")=="red");if(a||b==""||c==""||d==""||f==""){$(".err_notify").remove();$("#c_email_form .page_title").after('<div class="err_notify">表单有误或未填写完整</div>');g.preventDefault()}else{$("#c_email_form").submit()}});$("#old_pwd").bind("blur",function(){$("#old_pwd_tip").text("");if(this.value==""){$("#old_pwd_tip").text("密码不能为空").css("color","red").show()}});$("#new_pwd").bind("focus",function(){$("#new_pwd_tip").text("字母、数字或符号，最短四个字符，区分大小写").css("color","#666699").show()}).bind("blur",function(){$("#new_pwd_tip").text("");if(this.value==""){$("#new_pwd_tip").text("密码不能为空").css("color","red")}if(this.value!=""&&this.value.length<4){$("#new_pwd_tip").text("密码长度不足四个字符").css("color","red")}});$("#new_pwd_cfm").bind("blur",function(){$("#new_pwd_cfm_tip").text("");if(this.value!=$("#new_pwd").val()){$("#new_pwd_cfm_tip").text("两次输入密码不一致，请重新输入").css("color","red").show();this.value=""}});$("#btn_pwd_modify").click(function(c){var d=$("#old_pwd").val(),b=$("#new_pwd").val(),f=$("#new_pwd_cfm").val(),a=($("#old_pwd_tip").text()!="")||($("#new_pwd_tip").css("color")=="red")||($("#new_pwd_cfm_tip").text()!="");if(a||d==""||b==""||f==""||f==""){$(".err_notify").remove();$("#c_pwd_form .page_title").after('<div class="err_notify">表单有误或未填写完整</div>');c.preventDefault()}else{$("#c_pwd_form").submit()}})});